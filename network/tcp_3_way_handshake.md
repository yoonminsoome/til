# tcp 3 way handshake

- 클라이언트와 서버가 신뢰할 수 있는 TCP 연결을 수립하기 위한 초기 연결 과정으로 양쪽 모두 송·수신이 가능한 상태인지 확인한다.
- TCP는 연결 지향적 프로토콜로 데이터를 주고받기 전에 반드시 3-way handshake 과정을 거쳐 양방향 통신 가능 여부와 연결의 신뢰성을 보장한다.

## 연결 과정

```text
Client                                  Server
  | ----------- SYN(Seq = x) ------------> |
  | <--- SYN(Seq = y) + ACK(x + 1) --------|
  | ------------ ACK(y + 1) -------------> |
```

### SYN(연결 요청) - 클라이언트의 연결 요청 및 시퀀스 번호 전달

- 클라이언트가 서버에 연결을 요청한다.
- TCP 헤더에 SYN = 1을 설정하고 초기 시퀀스 번호를 전달한다.<br>Seq = x(클라이언트의 초기 시퀀스 번호)

### SYN + ACK(요청 수락) - 서버의 연결 수락 응답 및 시퀀스 번호 전달

- 서버는 클라이언트의 SYN 패킷을 수신하고 연결 요청을 수락한다.
- TCP 헤더에 SYN = 1, ACK = 1을 설정한다.<br>Seq = y(서버의 초기 시퀀스 번호)<br>Ack = x + 1(클라이언트의 SYN 수신 확인)

### ACK(연결 확정) - 서버의 SYN 수신 확인, TCP 연결 성립

- 클라이언트는 서버의 SYN 패킷을 정상적으로 수신했음을 알린다.
- TCP 헤더에 ACK = 1을 설정한다.<br>Ack = y + 1